name: Hexo process
on:
  push:
    branches:
      - hexo
jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          ref: hexo
      - name: Hexo
        run: |
          ls -al ./
          git config --global user.email "kaylor.chen@qq.com"
          git config --global user.name "kaylorchen"
          git config --global init.defaultBranch master
          sudo apt-get purge -y nodejs
          curl -fsSL https://deb.nodesource.com/setup_12.x | sudo -E bash -
          sudo apt-cache madison nodejs
          sudo apt-get install -y nodejs=12.21.0-deb-1nodesource1
          node -v
          sudo cp /usr/bin/node /usr/local/bin/node
          sudo cp /usr/bin/npm /usr/local/bin/npm
          npm install hexo
          npx hexo -v
          npx hexo g
          npx hexo d

